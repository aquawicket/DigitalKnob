dk_set(QUEUE_BUILD ON)
DKEXECUTABLE(DKRestart)

if(WIN)
	if(DEBUG)
		dk_copy(${DKPLUGINS}/DKRestart/${OS}/${DEBUG_DIR}/DKRestart.exe ${DKPROJECT}/assets/DKRestart/${OS}Debug TRUE)
	endif()
	if(RELEASE)
		dk_copy(${DKPLUGINS}/DKRestart/${OS}/${RELEASE_DIR}/DKRestart.exe ${DKPROJECT}/assets/DKRestart/${OS}Release TRUE)
	endif()
endif()


if(MAC)
	if(DEBUG)
		dk_copy(${DKPLUGINS}/DKRestart/${OS}/${DEBUG_DIR}/DKRestart.app ${DKPROJECT}/assets/DKRestart/${OS}Debug/DKRestart.app TRUE)
	endif()
	if(RELEASE)
		dk_copy(${DKPLUGINS}/DKRestart/${OS}/${RELEASE_DIR}/DKRestart.app ${DKPROJECT}/assets/DKRestart/${OS}Release/DKRestart.app" TRUE)
	endif()
endif()


if(LINUX)
	if(DEBUG)
		dk_copy(${DKPLUGINS}/DKRestart/${OS}/${DEBUG_DIR}/DKRestart ${DKPROJECT}/assets/${OS}Debug/DKRestart TRUE)
	endif()
	if(RELEASE)
		dk_copy(${DKPLUGINS}/DKRestart/${OS}/${RELEASE_DIR}/DKRestart ${DKPROJECT}/assets/${OS}Release/DKRestart TRUE)
	endif()
endif()


if(RASPBERRY)
	if(DEBUG)
		dk_copy(${DKPLUGINS}/DKRestart/${OS}/${DEBUG_DIR}/DKRestart ${DKPROJECT}/assets/${OS}Debug/DKRestart TRUE)
	endif()
	if(RELEASE)
		dk_copy(${DKPLUGINS}/DKRestart/${OS}/${RELEASE_DIR}/DKRestart ${DKPROJECT}/assets/${OS}Release/DKRestart TRUE)
	endif()
endif()



## DKRestart win
if(WIN)
#	dk_appendCmake("INCLUDE_DIRECTORIES(${DKPLUGINS}) \n")
#	dk_appendCmake("FIND_LIBRARY(DKd DK.lib ${DK}/${OS}/${DEBUG_DIR}) \n")
#	dk_appendCmake("LIST(APPEND DEBUG_DKLIBS debug \${DKd}) \n")
#	dk_appendCmake("FIND_LIBRARY(DK DK.lib ${DK}/${OS}/${RELEASE_DIR}) \n")
#	dk_appendCmake("LIST(APPEND RELEASE_DKLIBS optimized \${DK}) \n")	
	dk_appendCmake("FILE(GLOB DKRestart_SRC ${DKPLUGINS}/DKRestart/*.cpp ${DKPLUGINS}/DKRestart/*.manifest) \n")	
	if(WIN_32)
		dk_appendCmake("ADD_EXECUTABLE(DKRestart WIN32 \${DKRestart_SRC}) \n")
	endif()
	if(WIN_64)
		dk_appendCmake("ADD_EXECUTABLE(DKRestart WIN64 \${DKRestart_SRC}) \n")
	endif()
#	dk_appendCmake("TARGET_LINK_LIBRARIES(DKRestart \${DEBUG_DKLIBS} \${RELEASE_DKLIBS}) \n")
	dk_appendCmake("SET_TARGET_PROPERTIES(DKRestart PROPERTIES LINK_FLAGS_DEBUG \"/MANIFESTUAC:NO /SUBSYSTEM:CONSOLE /SAFESEH:NO\" LINK_FLAGS_RELEASE \"/INCREMENTAL:NO /OPT:NOREF /MANIFESTUAC:NO /SUBSYSTEM:CONSOLE /FORCE /SAFESEH:NO\") \n")
endif()


## DKRestart mac
if(MAC)
#	dk_appendCmake("INCLUDE_DIRECTORIES(${DKPLUGINS}) \n")
#	dk_appendCmake("FIND_LIBRARY(DKd libDK.a ${DK}/${OS}/${DEBUG_DIR}) \n")
#	dk_appendCmake("LIST(APPEND DEBUG_DKLIBS debug \${DKd}) \n")
#	dk_appendCmake("FIND_LIBRARY(DK libDK.a ${DK}/${OS}/${RELEASE_DIR}) \n")
#	dk_appendCmake("LIST(APPEND RELEASE_DKLIBS optimized \${DK}) \n")
	dk_appendCmake("FILE(GLOB DKRestart_SRC ${DKPLUGINS}/DKRestart/*.cpp) \n")
	if(MAC_32)
		dk_appendCmake("SET(CMAKE_OSX_ARCHITECTURES \"i386\") \n")
	endif()
	if(MAC_64)
		dk_appendCmake("SET(CMAKE_OSX_ARCHITECTURES \"x86_64\") \n")
	endif()
	dk_appendCmake("ADD_EXECUTABLE(DKRestart MACOSX_BUNDLE \${DKRestart_SRC}) \n")
#	dk_appendCmake("TARGET_LINK_LIBRARIES(DKRestart \${DEBUG_DKLIBS} \${RELEASE_DKLIBS}) \n")
endif()


## DKRestart linux
if(LINUX)
	#dk_appendCmake("INCLUDE_DIRECTORIES(${DKPLUGINS}) \n")
	if(DEBUG)
		#dk_appendCmake("FIND_LIBRARY(DKd libDK.a ${DK}/${OS}/${DEBUG_DIR}) \n")
		#dk_appendCmake("LIST(APPEND DEBUG_DKLIBS debug \${DKd}) \n")
		dk_appendCmake("FILE(GLOB DKRestart_SRC ${DKPLUGINS}/DKRestart/*.cpp) \n")
		dk_appendCmake("ADD_EXECUTABLE(DKRestart \${DKRestart_SRC}) \n")
		#dk_appendCmake("TARGET_LINK_LIBRARIES(DKRestart  \${DEBUG_DKLIBS}) \n")
	endif()
	if(RELEASE)
		#dk_appendCmake("FIND_LIBRARY(DK libDK.a ${DK}/${OS}/${RELEASE_DIR}) \n")
		#dk_appendCmake("LIST(APPEND RELEASE_DKLIBS optimized \${DK}) \n")
		dk_appendCmake("FILE(GLOB DKRestart_SRC ${DKPLUGINS}/DKRestart/*.cpp) \n")
		dk_appendCmake("ADD_EXECUTABLE(DKRestart \${DKRestart_SRC}) \n")
		#dk_appendCmake("TARGET_LINK_LIBRARIES(DKRestart  \${RELEASE_DKLIBS}) \n")
	endif()
endif()


## DKRestart raspberry
if(RASPBERRY)
	#dk_appendCmake("INCLUDE_DIRECTORIES(${DKPLUGINS}) \n")
	if(DEBUG)
		#dk_appendCmake("FIND_LIBRARY(DKd libDK.a ${DK}/${OS}/${DEBUG_DIR}) \n")
		#dk_appendCmake("LIST(APPEND DEBUG_DKLIBS debug \${DKd}) \n")
		dk_appendCmake("FILE(GLOB DKRestart_SRC ${DKPLUGINS}/DKRestart/*.cpp) \n")
		dk_appendCmake("ADD_EXECUTABLE(DKRestart \${DKRestart_SRC}) \n")
		#dk_appendCmake("TARGET_LINK_LIBRARIES(DKRestart  \${DEBUG_DKLIBS}) \n")
	endif()
	if(RELEASE)
		#dk_appendCmake("FIND_LIBRARY(DK libDK.a ${DK}/${OS}/${RELEASE_DIR}) \n")
		#dk_appendCmake("LIST(APPEND RELEASE_DKLIBS optimized \${DK}) \n")
		dk_appendCmake("FILE(GLOB DKRestart_SRC ${DKPLUGINS}/DKRestart/*.cpp) \n")
		dk_appendCmake("ADD_EXECUTABLE(DKRestart \${DKRestart_SRC}) \n")
		#dk_appendCmake("TARGET_LINK_LIBRARIES(DKRestart  \${RELEASE_DKLIBS}) \n")
	endif()
endif()
