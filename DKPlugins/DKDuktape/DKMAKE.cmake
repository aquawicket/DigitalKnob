DKDEPEND(duktape)
DKDEPEND(DK)
if(ENABLE_babel)
	DKDEPEND(babel)
endif()


if(NOT EXISTS ${DKPLUGINS}/DKDuktape/duktape.cpp)
	DKCOPY(${DUKTAPE}/src/duktape.c ${DKPLUGINS}/DKDuktape/duktape.cpp FALSE)
endif()
	
#DKSET(ENABLE_eventloop ON)
if(ENABLE_eventloop)
	DKDEFINE(HAVE_eventloop)
	if(NOT EXISTS ${DKPLUGINS}/DKDuktape/poll.cpp)
		DKCOPY(${DUKTAPE}/examples/eventloop/poll.c ${DKPLUGINS}/DKDuktape/poll.cpp FALSE)
	endif()
	if(NOT EXISTS ${DKPLUGINS}/DKDuktape/c_eventloop.cpp)
		DKCOPY(${DUKTAPE}/examples/eventloop/c_eventloop.c ${DKPLUGINS}/DKDuktape/c_eventloop.cpp FALSE)
	endif()
	if(NOT EXISTS ${DKPLUGINS}/DKDuktape/c_eventloop.js)
		DKCOPY(${DUKTAPE}/examples/eventloop/c_eventloop.js ${DKPLUGINS}/DKDuktape/c_eventloop.js FALSE)
	endif()
	if(NOT EXISTS ${DKPLUGINS}/DKDuktape/ecma_eventloop.js)
		DKCOPY(${DUKTAPE}/examples/eventloop/ecma_eventloop.js ${DKPLUGINS}/DKDuktape/ecma_eventloop.js FALSE)
	endif()
else()
	if(EXISTS ${DKPLUGINS}/DKDuktape/poll.cpp)
		DKREMOVE(${DKPLUGINS}/DKDuktape/poll.cpp)
	endif()
	if(EXISTS ${DKPLUGINS}/DKDuktape/c_eventloop.cpp)
		DKREMOVE(${DKPLUGINS}/DKDuktape/c_eventloop.cpp)
	endif()
	if(EXISTS ${DKPLUGINS}/DKDuktape/c_eventloop.js)
		DKREMOVE(${DKPLUGINS}/DKDuktape/c_eventloop.js)
	endif()
	if(EXISTS ${DKPLUGINS}/DKDuktape/ecma_eventloop.js)
		DKREMOVE(${DKPLUGINS}/DKDuktape/ecma_eventloop.js)
	endif()
endif()


DKINCLUDE(${DKPLUGINS}/DKDuktape)
DKINCLUDE(${DUKTAPE}/src)
DKDEFINE(HAVE_DKDuktape)

generateCmake(DKDuktape)
DKASSETS(DKDuktape)
