# https://github.com/libsdl-org/SDL_image
# https://github.com/aquawicket/SDL_image
#
# https://github.com/aquawicket/SDL_image/archive/refs/heads/main.zip
# https://github.com/libsdl-org/SDL_image/archive/refs/heads/main.zip
# https://www.libsdl.org/projects/SDL_image/release/SDL2_image-2.0.1.zip
# https://www.libsdl.org/projects/SDL_image/release/SDL2_image-2.0.5.zip
#
# Notes:  VS compiler options
#
# DEBUG flags
# Debug Information Format:         C7 compatible (/Z7)
# Enable Enhanced Instruction Set:  Streaming SIMD Extensions (/arch:SSE)
# Inline function expansion:        Default
# Preprocessor Definitions:         _DEBUG WIN32 _WINDOWS LOAD_BMP LOAD_GIF LOAD_JPG LOAD_LBM LOAD_PCX LOAD_PNG LOAD_PNM LOAD_SVG LOAD_TGA LOAD_TIF LOAD_WEBP LOAD_XPM LOAD_XV 
#
# RELEASE flags)
# Debug information format:         Program Database (/Zi)
# Diagnostics Format:               OFF
# Enable C++ Exceptions             Yes (/EHsc)
# Inline function expansion         Any Suitable (/Ob2)
# Ommit frame pointers              OFF



### DEPENDS ###
if(IOS OR IOSSIM)
	DKDEPEND(imageio)
	DKDEPEND(mobile_core_services)
endif()
DKDEPEND(zlib)
DKDEPEND(giflib)
DKDEPEND(libpng)
DKDEPEND(libjpeg-turbo)
DKDEPEND(libwebp)
DKDEPEND(tiff)
DKDEPEND(sdl2)


### VERSION ###
#DKSET(SDL2IMAGE_MAJOR 2)
#DKSET(SDL2IMAGE_MINOR 0)
#DKSET(SDL2IMAGE_BUILD 5)  
DKSET(SDL2IMAGE_VERSION main)
DKSET(SDL2IMAGE_NAME SDL2_image-${SDL2IMAGE_VERSION})
DKSET(SDL2IMAGE_DL https://github.com/aquawicket/SDL_image/archive/refs/heads/${SDL2IMAGE_VERSION}.zip)
DKSET(SDL2IMAGE ${3RDPARTY}/${SDL2IMAGE_NAME})


### INSTALL ###
DKINSTALL(${SDL2IMAGE_DL} sdl2_image ${SDL2IMAGE}) #NOPATCH)


### DKPLUGINS LINK ###
DKINCLUDE(${SDL2IMAGE})
WIN_DEBUG_LIB(${SDL2IMAGE}/${OS}/lib/${DEBUG_DIR}/SDL_image.lib)
WIN_RELEASE_LIB(${SDL2IMAGE}/${OS}/lib/${RELEASE_DIR}/SDL_image.lib)
APPLE_DEBUG_LIB(${SDL2IMAGE}/${OS}/lib/Debug/SDL_image.a)
APPLE_RELEASE_LIB(${SDL2IMAGE}/${OS}/lib/Release/SDL_image.a)
LINUX_DEBUG_LIB(${SDL2IMAGE}/${OS}/${DEBUG_DIR}/lib/SDL_image.a)
LINUX_RELEASE_LIB(${SDL2IMAGE}/${OS}/${RELEASE_DIR}/lib/SDL_image.a)
RASPBERRY_DEBUG_LIB(${SDL2IMAGE}/${OS}/${DEBUG_DIR}/lib/SDL_image.a)
RASPBERRY_RELEASE_LIB(${SDL2IMAGE}/${OS}/${RELEASE_DIR}/lib/SDL_image.a)
ANDROID_DEBUG_LIB(${SDL2IMAGE}/${OS}/lib/${DEBUG_DIR}/SDL_image.a)
ANDROID_RELEASE_LIB(${SDL2IMAGE}/${OS}/lib/${RELEASE_DIR}/SDL_image.a)


### 3RDPARTY LINK ###
DKSET(SDL2IMAGE_WIN 
-DSDL2_IMAGE_INCLUDE_DIR=${SDL2IMAGE}
-DSDL2_IMAGE_LIBRARY_TEMP=${SDL2IMAGE}/${OS}/lib/${RELEASE_DIR}/SDL_image.lib
-DSDL2_IMAGE_LIBRARY_DEBUG=${SDL2IMAGE}/${OS}/lib/${DEBUG_DIR}/SDL_image.lib 
-DSDL2_IMAGE_LIBRARY_RELEASE=${SDL2IMAGE}/${OS}/lib/${RELEASE_DIR}/SDL_image.lib)
DKSET(SDL2IMAGE_APPLE 
-DSDL2_IMAGE_INCLUDE_DIR=${SDL2IMAGE}
-DSDL2_IMAGE_LIBRARY_TEMP=${SDL2IMAGE}/${OS}/lib/Debug/SDL_image.a
-DSDL2_IMAGE_LIBRARY_DEBUG=${SDL2IMAGE}/${OS}/lib/Debug/SDL_image.a 
-DSDL2_IMAGE_LIBRARY_RELEASE=${SDL2IMAGE}/${OS}/lib/Release/SDL_image.a)
DKSET(SDL2IMAGE_LINUX 
-DSDL2_IMAGE_INCLUDE_DIR=${SDL2IMAGE} 
-DSDL2_IMAGE_LIBRARY_DEBUG=${SDL2IMAGE}/${OS}/lib/${DEBUG_DIR}/SDL_image.a 
-DSDL2_IMAGE_LIBRARY_RELEASE=${SDL2IMAGE}/${OS}/lib/${RELEASE_DIR}/SDL_image.a)
DKSET(SDL2IMAGE_RASPBERRY 
-DSDL2_IMAGE_INCLUDE_DIR=${SDL2IMAGE} 
-DSDL2_IMAGE_LIBRARY_DEBUG=${SDL2IMAGE}/${OS}/lib/${DEBUG_DIR}/SDL_image.a 
-DSDL2_IMAGE_LIBRARY_RELEASE=${SDL2IMAGE}/${OS}/lib/${RELEASE_DIR}/SDL_image.a)
DKSET(SDL2IMAGE_ANDROID 
-DSDL2_IMAGE_INCLUDE_DIR=${SDL2IMAGE} 
-DSDL2_IMAGE_LIBRARY_DEBUG=${SDL2IMAGE}/${OS}/lib/${DEBUG_DIR}/SDL_image.a 
-DSDL2_IMAGE_LIBRARY_RELEASE=${SDL2IMAGE}/${OS}/lib/${RELEASE_DIR}/SDL_image.a)


### COMPILE ###
WIN_DKSETPATH(${SDL2IMAGE}/${OS})
WIN32_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_WIN} ${ZLIB_CMAKE} ${TIFF_WIN} ${PNG_WIN} ${JPEG_WIN} ${GIF_WIN} ${SDL2IMAGE})
WIN64_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_WIN} ${ZLIB_CMAKE} ${TIFF_WIN} ${PNG_WIN} ${JPEG_WIN} ${GIF_WIN} ${SDL2IMAGE})
WIN_VS(SDL2_image-${SDL2IMAGE_VERSION} SDLIMAGE.sln SDLIMAGE)


MAC_PATH(${SDL2IMAGE}/${OS})
MAC32_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_APPLE} ${ZLIB_CMAKE} ${TIFF_APPLE} ${PNG_APPLE} ${JPEG_APPLE} ${GIF_APPLE} ${SDL2IMAGE})
MAC64_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_APPLE} ${ZLIB_CMAKE} ${TIFF_APPLE} ${PNG_APPLE} ${JPEG_APPLE} ${GIF_APPLE} ${SDL2IMAGE})
MAC_XCODE(SDL2_image-${SDL2IMAGE_VERSION} SDLIMAGE)


IOS_PATH(${SDL2IMAGE}/${OS})
IOS32_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_APPLE} ${ZLIB_CMAKE} ${TIFF_APPLE} ${PNG_APPLE} ${JPEG_APPLE} ${GIF_APPLE} ${SDL2IMAGE})
IOS64_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_APPLE} ${ZLIB_CMAKE} ${TIFF_APPLE} ${PNG_APPLE} ${JPEG_APPLE} ${GIF_APPLE} ${SDL2IMAGE})
IOS_XCODE(SDL2_image-${SDL2IMAGE_VERSION} SDLIMAGE)


IOSSIM_PATH(${SDL2IMAGE}/${OS})
IOSSIM32_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_APPLE} ${ZLIB_CMAKE} ${TIFF_APPLE} ${PNG_APPLE} ${JPEG_APPLE} ${GIF_APPLE} ${SDL2IMAGE})
IOSSIM64_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_APPLE} ${ZLIB_CMAKE} ${TIFF_APPLE} ${PNG_APPLE} ${JPEG_APPLE} ${GIF_APPLE} ${SDL2IMAGE})
IOSSIM_XCODE(SDL2_image-${SDL2IMAGE_VERSION} SDLIMAGE)


LINUX32_DEBUG_PATH(${SDL2IMAGE}/${OS}/${DEBUG_DIR})
LINUX32_DEBUG_COMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_LINUX} ${ZLIB_CMAKE} ${TIFF_LINUX} ${PNG_LINUX} ${JPEG_LINUX_DEBUG} ${GIF_LINUX} ${SDL2IMAGE})
LINUX32_DEBUG_COMMAND(make SDLIMAGE)
LINUX32_RELEASE_PATH(${SDL2IMAGE}/${OS}/${RELEASE_DIR})
LINUX32_RELEASE_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_LINUX} ${ZLIB_CMAKE} ${TIFF_LINUX} ${PNG_LINUX} ${JPEG_LINUX_RELEASE} ${GIF_LINUX} ${SDL2IMAGE})
LINUX32_RELEASE_DKQCOMMAND(make SDLIMAGE)

LINUX64_DEBUG_PATH(${SDL2IMAGE}/${OS}/${DEBUG_DIR})
LINUX64_DEBUG_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_LINUX} ${ZLIB_CMAKE} ${TIFF_LINUX} ${PNG_LINUX} ${JPEG_LINUX_DEBUG} ${GIF_LINUX} ${SDL2IMAGE})
LINUX64_DEBUG_DKQCOMMAND(make)
LINUX64_RELEASE_PATH(${SDL2IMAGE}/${OS}/${RELEASE_DIR})
LINUX64_RELEASE_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_LINUX} ${ZLIB_CMAKE} ${TIFF_LINUX} ${PNG_LINUX} ${JPEG_LINUX_RELEASE} ${GIF_LINUX} ${SDL2IMAGE})
LINUX64_RELEASE_DKQCOMMAND(make)


RASPBERRY32_DEBUG_PATH(${SDL2IMAGE}/${OS}/${DEBUG_DIR})
RASPBERRY32_DEBUG_DKQCOMMAND(${DKCMAKE_RASPBERRY32_DEBUG} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_RASPBERRY} ${ZLIB_CMAKE} ${TIFF_RASPBERRY} ${PNG_RASPBERRY} ${JPEG_RASPBERRY_DEBUG} ${GIF_RASPBERRY} ${SDL2IMAGE})
RASPBERRY32_DEBUG_DKQCOMMAND(make SDLIMAGE)
RASPBERRY32_RELEASE_PATH(${SDL2IMAGE}/${OS}/${RELEASE_DIR})
RASPBERRY32_RELEASE_DKQCOMMAND(${DKCMAKE_RASPBERRY32_RELEASE} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_RASPBERRY} ${ZLIB_CMAKE} ${TIFF_RASPBERRY} ${PNG_RASPBERRY} ${JPEG_RASPBERRY_RELEASE} ${GIF_RASPBERRY} ${SDL2IMAGE})
RASPBERRY32_RELEASE_DKQCOMMAND(make SDLIMAGE)	
	
	
##ANDROID_NDK(SDL2_image-${SDL2IMAGE_VERSION})
ANDROID_PATH(${SDL2IMAGE}/${OS})
ANDROID32_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_ANDROID} ${ZLIB_CMAKE} ${TIFF_ANDROID} ${PNG_ANDROID} ${JPEG_ANDROID} ${GIF_ANDROID} ${SDL2IMAGE})
ANDROID364_DKQCOMMAND(${DKCMAKE_BUILD} -DSDLIMAGE_SUPPORT_GIF=ON -DSDLIMAGE_SUPPORT_JPEG=ON -DSDLIMAGE_SUPPORT_PNG=ON -DSDLIMAGE_SUPPORT_WEBP=OFF ${SDL2_ANDROID} ${ZLIB_CMAKE} ${TIFF_ANDROID} ${PNG_ANDROID} ${JPEG_ANDROID} ${GIF_ANDROID} ${SDL2IMAGE})
ANDROID_VS(SDL2_image-${SDL2IMAGE_VERSION} SDLIMAGE.sln SDLIMAGE)
