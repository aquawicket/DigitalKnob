#!/usr/bin/cmake -P
if(NOT EXISTS "$ENV{DKCMAKE_FUNCTIONS_DIR_}")
	set(ENV{DKCMAKE_FUNCTIONS_DIR_} "../../../DKCMake/functions/")
endif()
include("$ENV{DKCMAKE_FUNCTIONS_DIR_}DK.cmake")


dk_load(dk_builder)
# https://github.com/mccdo/osgworks


### DEPEND ###
dk_depend(boost)
dk_depend(openscenegraph)


### IMPORT ###
#dk_import(https://github.com/mccdo/osgworks.git)
dk_import(https://github.com/mccdo/osgworks/archive/refs/heads/master.zip)


### LINK ###
dk_define(OSGWORKS_STATIC)
dk_include(${OSGWORKS}/include)

dk_enable(ALL_LIBS)
if(ALL_LIBS)
	dk_enable(osgdb_osgobjects)
	dk_enable(osgdb_osgwTools)
	dk_enable(osgdb_skeleton)
	dk_enable(osgwControls)
	dk_enable(osgwMx)
	dk_enable(osgwQuery)
	dk_enable(osgwTools)
endif()
if(osgdb_osgobjects)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgdb_osgobjects.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgdb_osgobjects.a)
	APPLE_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgdb_osgobjects.a)
	APPLE_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgdb_osgobjects.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgobjects.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgobjects.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgobjects.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgobjects.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgobjects.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgobjects.a)
	Windows_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgdb_osgobjectsd.lib)
	Windows_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgdb_osgobjects.lib)
endif()
if(osgdb_osgwTools)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgdb_osgwTools.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgdb_osgwTools.a)
	APPLE_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgdb_osgwTools.a)
	APPLE_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgdb_osgwTools.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgwTools.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgwTools.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgwTools.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgwTools.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgwTools.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgwTools.a)
	Windows_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgdb_osgwToolsd.lib)
	Windows_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgdb_osgwTools.lib)
endif()
if(osgdb_skeleton)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgdb_skeleton.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgdb_skeleton.a)
	APPLE_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgdb_skeleton.a)
	APPLE_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgdb_skeleton.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_skeleton.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_skeleton.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_skeleton.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_skeleton.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_skeleton.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_skeleton.a)
	Windows_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgdb_skeletond.lib)
	Windows_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgdb_skeleton.lib)
endif()
if(osgwControls)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgwControls.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgwControls.a)
	APPLE_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/libosgwControls.a)
	APPLE_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/libosgwControls.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwControls.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwControls.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwControls.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwControls.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwControls.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwControls.a)
	Windows_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgwControlsd.lib)
	Windows_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgwControls.lib)
endif()
if(osgwMx)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgwMx.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgwMx.a)
	APPLE_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/libosgwMx.a)
	APPLE_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/libosgwMx.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwMx.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwMx.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwMx.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwMx.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwMx.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwMx.a)
	Windows_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgwMxd.lib)
	Windows_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgwMx.lib)
endif()
if(osgwQuery)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgwQuery.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgwQuery.a)
	APPLE_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/libosgwQuery.a)
	APPLE_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/libosgwQuery.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwQuery.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwQuery.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwQuery.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwQuery.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwQuery.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwQuery.a)
	Windows_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgwQueryd.lib)
	Windows_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgwQuery.lib)
endif()
if(osgwTools)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgwTools.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgwTools.a)
	APPLE_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/libosgwTools.a)
	APPLE_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/libosgwTools.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwTools.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwTools.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwTools.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwTools.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwTools.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwTools.a)
	Windows_dk_libDebug(${OSGWORKS}/${Target_Tuple}/lib/${Debug_Dir}/osgwToolsd.lib)
	Windows_dk_libRelease(${OSGWORKS}/${Target_Tuple}/lib/${Release_Dir}/osgwTools.lib)
endif()


### 3RDPARTY LINK ###
ANDROID_dk_set				(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${Target_Tuple}/lib)
Apple_dk_set				(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${Target_Tuple}/lib)
Emscripten_Debug_dk_set		(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${Target_Tuple}/Debug/lib/x86_64-linux-gnu)
Emscripten_Release_dk_set	(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${Target_Tuple}/Release/lib/x86_64-linux-gnu)
Linux_Debug_dk_set			(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${Target_Tuple}/Debug/lib/x86_64-linux-gnu)
Linux_Release_dk_set		(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${Target_Tuple}/Release/lib/x86_64-linux-gnu)
Raspberry_Debug_dk_set		(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${Target_Tuple}/Debug/lib/x86_64-linux-gnu)
Raspberry_Release_dk_set	(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${Target_Tuple}/Release/lib/x86_64-linux-gnu)
Windows_dk_set					(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${Target_Tuple}/lib)


### GENERATE ###
dk_configure(${OSGWORKS}
	-DOSGWORKS_BUILD_APPS=OFF 
	-DOSGWORKS_INSTALL_DATA=OFF 
	-DDIRECTINPUT_ARCH_x64=OFF 
	-DBoost_INCLUDE_DIR=OFF 
	${BOOST_CMAKE} 
	${OPENSCENEGRAPH_CMAKE})


### COMPILE ###
dk_build(${OSGWORKS})
