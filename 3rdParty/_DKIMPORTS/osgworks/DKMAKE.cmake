#!/usr/bin/cmake -P
if(NOT DKCMAKE_FUNCTIONS_DIR_)
	set(DKCMAKE_FUNCTIONS_DIR_ ../../../DKCMake/functions/)
endif()
include("$ENV{DKCMAKE_FUNCTIONS_DIR_}DK.cmake")


dk_load(dk_builder)
# https://github.com/mccdo/osgworks


### DEPEND ###
dk_depend(boost)
dk_depend(openscenegraph)


### IMPORT ###
#dk_import(https://github.com/mccdo/osgworks.git)
dk_import(https://github.com/mccdo/osgworks/archive/refs/heads/master.zip)


### LINK ###
dk_define(OSGWORKS_STATIC)
dk_include(${OSGWORKS}/include)

dk_enable(ALL_LIBS)
if(ALL_LIBS)
	dk_enable(osgdb_osgobjects)
	dk_enable(osgdb_osgwTools)
	dk_enable(osgdb_skeleton)
	dk_enable(osgwControls)
	dk_enable(osgwMx)
	dk_enable(osgwQuery)
	dk_enable(osgwTools)
endif()
if(osgdb_osgobjects)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgdb_osgobjects.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgdb_osgobjects.a)
	APPLE_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgdb_osgobjects.a)
	APPLE_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgdb_osgobjects.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgobjects.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgobjects.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgobjects.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgobjects.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgobjects.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgobjects.a)
	WIN_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgdb_osgobjectsd.lib)
	WIN_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgdb_osgobjects.lib)
endif()
if(osgdb_osgwTools)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgdb_osgwTools.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgdb_osgwTools.a)
	APPLE_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgdb_osgwTools.a)
	APPLE_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgdb_osgwTools.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgwTools.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgwTools.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgwTools.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgwTools.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_osgwTools.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_osgwTools.a)
	WIN_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgdb_osgwToolsd.lib)
	WIN_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgdb_osgwTools.lib)
endif()
if(osgdb_skeleton)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgdb_skeleton.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgdb_skeleton.a)
	APPLE_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgdb_skeleton.a)
	APPLE_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgdb_skeleton.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_skeleton.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_skeleton.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_skeleton.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_skeleton.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/osgdb_skeleton.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/osgdb_skeleton.a)
	WIN_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgdb_skeletond.lib)
	WIN_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgdb_skeleton.lib)
endif()
if(osgwControls)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgwControls.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgwControls.a)
	APPLE_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/libosgwControls.a)
	APPLE_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/libosgwControls.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwControls.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwControls.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwControls.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwControls.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwControls.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwControls.a)
	WIN_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgwControlsd.lib)
	WIN_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgwControls.lib)
endif()
if(osgwMx)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgwMx.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgwMx.a)
	APPLE_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/libosgwMx.a)
	APPLE_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/libosgwMx.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwMx.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwMx.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwMx.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwMx.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwMx.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwMx.a)
	WIN_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgwMxd.lib)
	WIN_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgwMx.lib)
endif()
if(osgwQuery)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgwQuery.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgwQuery.a)
	APPLE_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/libosgwQuery.a)
	APPLE_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/libosgwQuery.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwQuery.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwQuery.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwQuery.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwQuery.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwQuery.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwQuery.a)
	WIN_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgwQueryd.lib)
	WIN_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgwQuery.lib)
endif()
if(osgwTools)
	ANDROID_dk_libDebug(${OSGWORKS_DEBUG_DIR}/obj/local/armeabi-v7a/libosgwTools.a)
	ANDROID_dk_libRelease(${OSGWORKS_RELEASE_DIR}/obj/local/armeabi-v7a/libosgwTools.a)
	APPLE_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/libosgwTools.a)
	APPLE_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/libosgwTools.a)
	EMSCRIPTEN_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwTools.a)
	EMSCRIPTEN_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwTools.a)
	LINUX_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwTools.a)
	LINUX_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwTools.a)
	RASPBERRY_dk_libDebug(${OSGWORKS_DEBUG_DIR}/lib/libosgwTools.a)
	RASPBERRY_dk_libRelease(${OSGWORKS_RELEASE_DIR}/lib/libosgwTools.a)
	WIN_dk_libDebug(${OSGWORKS}/${target_triple}/lib/${DEBUG_DIR}/osgwToolsd.lib)
	WIN_dk_libRelease(${OSGWORKS}/${target_triple}/lib/${RELEASE_DIR}/osgwTools.lib)
endif()


### 3RDPARTY LINK ###
ANDROID_dk_set				(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${target_triple}/lib)
APPLE_dk_set				(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${target_triple}/lib)
EMSCRIPTEN_DEBUG_dk_set		(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${target_triple}/Debug/lib/x86_64-linux-gnu)
EMSCRIPTEN_RELEASE_dk_set	(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${target_triple}/Release/lib/x86_64-linux-gnu)
LINUX_DEBUG_dk_set			(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${target_triple}/Debug/lib/x86_64-linux-gnu)
LINUX_RELEASE_dk_set		(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${target_triple}/Release/lib/x86_64-linux-gnu)
RASPBERRY_DEBUG_dk_set		(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${target_triple}/Debug/lib/x86_64-linux-gnu)
RASPBERRY_RELEASE_dk_set	(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${target_triple}/Release/lib/x86_64-linux-gnu)
WIN_dk_set					(OSGWORKS_CMAKE -DosgWorks_DIR=${OSGWORKS}/${target_triple}/lib)


### GENERATE ###
dk_configure(${OSGWORKS}
	-DOSGWORKS_BUILD_APPS=OFF 
	-DOSGWORKS_INSTALL_DATA=OFF 
	-DDIRECTINPUT_ARCH_x64=OFF 
	-DBoost_INCLUDE_DIR=OFF 
	${BOOST_CMAKE} 
	${OPENSCENEGRAPH_CMAKE})


### COMPILE ###
dk_build(${OSGWORKS})
