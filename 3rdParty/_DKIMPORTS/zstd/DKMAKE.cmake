# https://github.com/facebook/zstd.git


### IMPORT ###
dk_import(https://github.com/facebook/zstd.git)


### LINK ###
dk_include					(${ZSTD}/lib										ZSTD_INCLUDE_DIR)
if(MSVC)
	ANDROID_dk_libDebug		(${ZSTD}/${OS}/lib/${DEBUG_DIR}/libzstd.a			ZSTD_LIBRARY_DEBUG)
	ANDROID_dk_libRelease	(${ZSTD}/${OS}/lib/${RELEASE_DIR}/libzstd.a			ZSTD_LIBRARY_RELEASE)
	WIN_dk_libDebug			(${ZSTD}/${OS}/lib/${DEBUG_DIR}/zstd_static.lib		ZSTD_LIBRARY_DEBUG)
	WIN_dk_libRelease		(${ZSTD}/${OS}/lib/${RELEASE_DIR}/zstd_static.lib	ZSTD_LIBRARY_RELEASE)
elseif(APPLE)
	dk_libDebug				(${ZSTD}/${OS}/lib/${DEBUG_DIR}/libzstd.a			ZSTD_LIBRARY_DEBUG)
	dk_libRelease			(${ZSTD}/${OS}/lib/${RELEASE_DIR}/libzstd.a			ZSTD_LIBRARY_RELEASE)
else()
	dk_libDebug				(${ZSTD}/${OS}/${DEBUG_DIR}/lib/libzstd.a			ZSTD_LIBRARY_DEBUG)
	dk_libRelease			(${ZSTD}/${OS}/${RELEASE_DIR}/lib/libzstd.a			ZSTD_LIBRARY_RELEASE)
endif()
	

### 3RDPARTY LINK ###
if(MULTI_CONFIG)
	dk_set			(ZSTD_CMAKE -DZstd_INCLUDE_DIR=${ZSTD_INCLUDE_DIR} -DZstd_LIBRARY_DEBUG=${ZSTD_LIBRARY_DEBUG} -DZstd_LIBRARY_RELEASE=${ZSTD_LIBRARY_RELEASE} -DZstd_LIBRARIES=${ZSTD_LIBRARY_DEBUG};${ZSTD_LIBRARY_RELEASE})
else()
	DEBUG_dk_set	(ZSTD_CMAKE -DZstd_INCLUDE_DIR=${ZSTD_INCLUDE_DIR} -DZstd_LIBRARY=${ZSTD_LIBRARY_DEBUG} -DZstd_LIBRARIES=${ZSTD_LIBRARY_DEBUG})
	RELEASE_dk_set	(ZSTD_CMAKE -DZstd_INCLUDE_DIR=${ZSTD_INCLUDE_DIR} -DZstd_LIBRARY=${ZSTD_LIBRARY_RELEASE} -DZstd_LIBRARIES=${ZSTD_LIBRARY_RELEASE})
endif()


### GENERATE ###
dk_queueCommand(${DKCMAKE_BUILD} 
	-DZSTD_LEGACY_SUPPORT=OFF		# "LEGACY SUPPORT" OFF
	-DZSTD_MULTITHREAD_SUPPORT=ON	# "MULTITHREADING SUPPORT" ON
	-DZSTD_BUILD_PROGRAMS=OFF		# "BUILD PROGRAMS" ON
	-DZSTD_BUILD_CONTRIB=OFF		# "BUILD CONTRIB" OFF
	-DZSTD_BUILD_TESTS=OFF			# "BUILD TESTS" ${ZSTD_BUILD_TESTS_default}
	-DZSTD_USE_STATIC_RUNTIME=ON	# "LINK TO STATIC RUN-TIME LIBRARIES" OFF
	-DZSTD_PROGRAMS_LINK_SHARED=OFF # "PROGRAMS LINK SHARED" OFF
	-DZSTD_BUILD_STATIC=ON			# "BUILD STATIC LIBRARIES" ON
	-DZSTD_BUILD_SHARED=OFF			# "BUILD SHARED LIBRARIES" ON
	${ZSTD}/build/cmake)


### COMPILE ###
dk_build(${ZSTD})
