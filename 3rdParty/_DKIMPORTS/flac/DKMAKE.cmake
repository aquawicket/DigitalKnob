# https://github.com/xiph/flac.git
# https://ftp.osuosl.org/pub/xiph/releases/flac/flac-1.3.2-win.zip
# https://ftp.osuosl.org/pub/xiph/releases/flac/flac-1.3.2.tar.xz


### DEPEND ###
dk_depend(nasm)
dk_depend(ogg)


### IMPORT ###
dk_import(https://ftp.osuosl.org/pub/xiph/releases/flac/flac-1.3.2.tar.xz)
#dk_import(https://github.com/xiph/flac.git)


### LINK ###
dk_include		(${FLAC})
dk_include		(${FLAC}																FLAC_INCLUDE_DIR)
dk_libDebug		(${FLAC}/${OS}/${DEBUG_DIR}/src/libFLAC/.libs/libFLAC-static.a			FLAC_LIBRARY_DEBUG)
dk_libRelease	(${FLAC}/${OS}/${RELEASE_DIR}/src/libFLAC/.libs/libFLAC-static.a		FLAC_LIBRARY_RELEASE)


### 3rd Party Link ###
ANDROID_dk_set(FLAC_CMAKE 
	-DFLAC_INCLUDE_DIR=${FLAC_INCLUDE_DIR}
	-DFLAC_LIBRARY_DEBUG=${FLAC_LIBRARY_DEBUG}
	-DFLAC_LIBRARY_RELEASE=${FLAC_LIBRARY_RELEASE})
APPLE_dk_set(FLAC_CMAKE
	-DFLAC_INCLUDE_DIR=${FLAC_INCLUDE_DIR}
	-DFLAC_LIBRARY_DEBUG=${FLAC_LIBRARY_DEBUG}
	-DFLAC_LIBRARY_RELEASE=${FLAC_LIBRARY_RELEASE})
EMSCRIPTEN_DEBUG_dk_set(FLAC_CMAKE 
	-DFLAC_INCLUDE_DIR=${FLAC_INCLUDE_DIR}
	-DFLAC_LIBRARY=${FLAC_LIBRARY_DEBUG}
	-DFLAC_LIBRARY_DEBUG=${FLAC_LIBRARY_DEBUG})
EMSCRIPTEN_RELEASE_dk_set(FLAC_CMAKE 
	-DFLAC_INCLUDE_DIR=${FLAC_INCLUDE_DIR}
	-DFLAC_LIBRARY=${FLAC_LIBRARY_RELEASE}
	-DFLAC_LIBRARY_RELEASE=${FLAC_LIBRARY_RELEASE})
LINUX_DEBUG_dk_set(FLAC_CMAKE 
	-DFLAC_INCLUDE_DIR=${FLAC_INCLUDE_DIR}
	-DFLAC_LIBRARY=${FLAC_LIBRARY_DEBUG}
	-DFLAC_LIBRARY_DEBUG=${FLAC_LIBRARY_DEBUG})
LINUX_RELEASE_dk_set(FLAC_CMAKE 
	-DFLAC_INCLUDE_DIR=${FLAC_INCLUDE_DIR}
	-DFLAC_LIBRARY=${FLAC_LIBRARY_RELEASE}
	-DFLAC_LIBRARY_RELEASE=${FLAC_LIBRARY_RELEASE})
RASPBERRY_DEBUG_dk_set(FLAC_CMAKE 
	-DFLAC_INCLUDE_DIR=${FLAC_INCLUDE_DIR}
	-DFLAC_LIBRARY=${FLAC_LIBRARY_DEBUG}
	-DFLAC_LIBRARY_DEBUG=${FLAC_LIBRARY_DEBUG})
RASPBERRY_RELEASE_dk_set(FLAC_CMAKE 
	-DFLAC_INCLUDE_DIR=${FLAC_INCLUDE_DIR}
	-DFLAC_LIBRARY=${FLAC_LIBRARY_RELEASE}
	-DFLAC_LIBRARY_RELEASE=${FLAC_LIBRARY_RELEASE})
WIN_dk_set(FLAC_CMAKE
	-DFLAC_INCLUDE_DIR=${FLAC_INCLUDE_DIR}
	-DFLAC_LIBRARY_DEBUG=${FLAC_LIBRARY_DEBUG}
	-DFLAC_LIBRARY_RELEASE=${FLAC_LIBRARY_RELEASE})


### GENERATE / COMPILE ###
string(REPLACE "-std=c++17" "" 	FLAC_BUILD "${DKCONFIGURE_BUILD}")
string(REPLACE "  " 		" " FLAC_BUILD "${FLAC_BUILD}")

if(WIN_HOST)
	DEBUG_dk_setPath		(${FLAC}/${OS}/${DEBUG_DIR})
	DEBUG_dk_queueMsys2		(${FLAC_BUILD} ${OGG_CONFIGURE})
	DEBUG_dk_queueMsys2     (make)
	RELEASE_dk_setPath		(${FLAC}/${OS}/${RELEASE_DIR})
	RELEASE_dk_queueMsys2	(${FLAC_BUILD} ${OGG_CONFIGURE})
	RELEASE_dk_queueMsys2	(make)
else()
	DEBUG_dk_setPath		(${FLAC}/${OS}/${DEBUG_DIR})
	DEBUG_dk_queueCommand	(${FLAC_BUILD} ${OGG_CONFIGURE})
	DEBUG_dk_queueCommand	(make)
	RELEASE_dk_setPath		(${FLAC}/${OS}/${RELEASE_DIR})
	RELEASE_dk_queueCommand	(${FLAC_BUILD} ${OGG_CONFIGURE})
	RELEASE_dk_queueCommand	(make)
endif()
