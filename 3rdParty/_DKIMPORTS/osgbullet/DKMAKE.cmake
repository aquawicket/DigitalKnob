include(${DKCMAKE_FUNCTIONS_DIR}/DK.cmake)
# https://github.com/mccdo/osgbullet


### DEPEND ###
dk_depend(bullet3)
dk_depend(osgworks)


### IMPORT ###
#dk_import(https://github.com/mccdo/osgbullet.git)
dk_import(https://github.com/mccdo/osgbullet/archive/refs/heads/master.zip)


### LINK ###
dk_define(OSGBULLET_STATIC)
dk_include(${OSGBULLET}/include)

dk_enable(ALL_LIBS)
if(ALL_LIBS)
	dk_enable(osgbCollision)
	dk_enable(osgbDynamics)
	dk_enable(osgbInteraction)
	dk_enable(osgdb_osgbdynamics)
	dk_enable(osgdb_sgb)
endif()
if(osgbCollision)
	dk_define(OSGBCOLLISION_LIBRARY)	
	ANDROID_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/libosgbCollision.a)
	ANDROID_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/libosgbCollision.a)
	APPLE_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/libosgbCollision.a)
	APPLE_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/libosgbCollision.a)
	EMSCRIPTEN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/libosgbCollision.a)
	EMSCRIPTEN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/libosgbCollision.a)
	LINUX_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/libosgbCollision.a)
	LINUX_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/libosgbCollision.a)
	WIN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/osgbCollisiond.lib)
	WIN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/osgbCollision.lib)
endif()
if(osgbDynamics)
	dk_define(OSGBDYNAMICS_LIBRARY)
	ANDROID_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/libosgbDynamics.a)
	ANDROID_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/libosgbDynamics.a)
	APPLE_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/libosgbDynamics.a)
	APPLE_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/libosgbDynamics.a)
	EMSCRIPTEN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/libosgbDynamics.a)
	EMSCRIPTEN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/libosgbDynamics.a)
	LINUX_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/libosgbDynamics.a)
	LINUX_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/libosgbDynamics.a)
	WIN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/osgbDynamicsd.lib)
	WIN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/osgbDynamics.lib)
endif()
if(osgbInteraction)
	dk_define(OSGBINTERACTION_LIBRARY)
	ANDROID_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/libosgbInteraction.a)
	ANDROID_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/libosgbInteraction.a)
	APPLE_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/libosgbInteraction.a)
	APPLE_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/libosgbInteraction.a)
	EMSCRIPTEN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/libosgbInteraction.a)
	EMSCRIPTEN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/libosgbInteraction.a)
	LINUX_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/libosgbInteraction.a)
	LINUX_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/libosgbInteraction.a)
	WIN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/osgbInteractiond.lib)
	WIN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/osgbInteraction.lib)
endif()
if(osgdb_osgbdynamics)
	ANDROID_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/libosgdb_osgbdynamics.a)
	ANDROID_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/libosgdb_osgbdynamics.a)
	APPLE_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/osgdb_osgbdynamics.a)
	APPLE_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/osgdb_osgbdynamics.a)
	EMSCRIPTEN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/osgdb_osgbdynamics.a)
	EMSCRIPTEN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/osgdb_osgbdynamics.a)
	LINUX_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/osgdb_osgbdynamics.a)
	LINUX_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/osgdb_osgbdynamics.a)
	WIN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/osgdb_osgbdynamicsd.lib)
	WIN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/osgdb_osgbdynamics.lib)
endif()
if(osgdb_sgb)
	ANDROID_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/libosgdb_sgb.a)
	ANDROID_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/libosgdb_sgb.a)
	APPLE_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/osgdb_sgb.a)
	APPLE_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/osgdb_sgb.a)
	EMSCRIPTEN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/osgdb_sgb.a)
	EMSCRIPTEN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/osgdb_sgb.a)
	LINUX_TARGET_dk_libDebug(${OSGBULLET}/${OS}/${DEBUG_DIR}/lib/osgdb_sgb.a)
	LINUX_TARGET_dk_libRelease(${OSGBULLET}/${OS}/${RELEASE_DIR}/lib/osgdb_sgb.a)
	WIN_TARGET_dk_libDebug(${OSGBULLET}/${OS}/lib/${DEBUG_DIR}/osgdb_sgbd.lib)
	WIN_TARGET_dk_libRelease(${OSGBULLET}/${OS}/lib/${RELEASE_DIR}/osgdb_sgb.lib)
endif()


### GENERATE ###
ANDROID_TARGET_dk_configure			(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/${OS} ${BULLET3_CMAKE})
EMSCRIPTEN_DEBUG_dk_configure	(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/${OS}/${DEBUG_DIR} ${BULLET3_CMAKE})
EMSCRIPTEN_RELEASE_dk_configure	(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/${OS}/${RELEASE_DIR} ${BULLET3_CMAKE})
IOSSIM_TARGET_dk_configure				(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/ios-simulator ${BULLET3_CMAKE})
IOS_TARGET_dk_configure				(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/ios ${BULLET3_CMAKE})
LINUX_DEBUG_dk_configure		(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/${OS}/${DEBUG_DIR} ${BULLET3_CMAKE})
LINUX_RELEASE_dk_configure		(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/${OS}/${RELEASE_DIR} ${BULLET3_CMAKE})
MAC_TARGET_dk_configure				(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/${OS} ${BULLET3_CMAKE})
RASPBERRY_DEBUG_dk_configure	(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/${OS}/${DEBUG_DIR} ${BULLET3_CMAKE})
RASPBERRY_RELEASE_dk_configure	(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/${OS}/${RELEASE_DIR} ${BULLET3_CMAKE})
WIN_TARGET_dk_configure				(${OSGBULLET} ${OPENSCENEGRAPH_CMAKE} ${OSGWORKS_CMAKE} -DOSGBULLET_BUILD_APPLICATIONS=OFF -DOSGBULLET_BUILD_EXAMPLES=OFF -DOSGBULLET_INSTALL_DATA=OFF "-DBulletInstallType=Source And Build Tree" -DBulletSourceRoot=${BULLET3} -DBulletBuildRoot=${BULLET3}/${OS} ${BULLET3_CMAKE})


### COMPILE ###
dk_build(${OSGBULLET})
