# https://github.com/webmproject/libwebp
 

### DEPENDS ###
DKDEPEND(zlib)
DKDEPEND(libpng)
DKDEPEND(tiff)
DKDEPEND(libjpeg-turbo)
DKDEPEND(giflib)
DKDEPEND(sdl)

DKIMPORT(https://github.com/webmproject/libwebp)
#DKSET(LIBWEBP_MAJOR 1)
#DKSET(LIBWEBP_MINOR 0)
#DKSET(LIBWEBP_BUILD 3)
#DKSET(LIBWEBP_VERSION ${LIBWEBP_MAJOR}.${LIBWEBP_MINOR}.${LIBWEBP_BUILD})
#DKSET(LIBWEBP_NAME libwebp-${LIBWEBP_VERSION})
#DKSET(LIBWEBP_DL https://github.com/webmproject/libwebp/archive/refs/tags/v1.0.3.zip)
#DKSET(LIBWEBP ${3RDPARTY}/${LIBWEBP_NAME})
#DKINSTALL(${LIBWEBP_DL} libwebp ${LIBWEBP})


### DKPLUGINS LINK ###
DKINCLUDE(${LIBWEBP})
WIN_DEBUG_DKLIB(${LIBWEBP}/${OS}/${DEBUG_DIR}/webp.lib)
WIN_RELEASE_DKLIB(${LIBWEBP}/${OS}/${RELEASE_DIR}/webp.lib)
APPLE_DEBUG_DKLIB(${LIBWEBP}/${OS}/WebP.build/${DEBUG_DIR}/webpdecode.build/libwebpdecode.a)
APPLE_RELEASE_DKLIB(${LIBWEBP}/${OS}/WebP.build/${RELEASE_DIR}/webpdecode.build/libwebpdecode.a)
APPLE_DEBUG_DKLIB(${LIBWEBP}/${OS}/WebP.build/${DEBUG_DIR}/webpdsp.build/libwebpdsp.a)
APPLE_RELEASE_DKLIB(${LIBWEBP}/${OS}/WebP.build/${RELEASE_DIR}/webpdsp.build/libwebpdsp.a)
APPLE_DEBUG_DKLIB(${LIBWEBP}/${OS}/WebP.build/${DEBUG_DIR}/webpencode.build/libwebpencode.a)
APPLE_RELEASE_DKLIB(${LIBWEBP}/${OS}/WebP.build/${RELEASE_DIR}/webpencode.build/libwebpencode.a)
APPLE_DEBUG_DKLIB(${LIBWEBP}/${OS}/WebP.build/${DEBUG_DIR}/webputils.build/libwebputils.a)
APPLE_RELEASE_DKLIB(${LIBWEBP}/${OS}/WebP.build/${RELEASE_DIR}/webputils.build/libwebputils.a)
LINUX_DEBUG_DKLIB(${LIBWEBP}/${OS}/${DEBUG_DIR}/libwebp.a)
LINUX_RELEASE_DKLIB(${LIBWEBP}/${OS}/${RELEASE_DIR}/libwebp.a)
RASPBERRY_DEBUG_DKLIB(${LIBWEBP}/${OS}/${DEBUG_DIR}/libwebp.a)
RASPBERRY_RELEASE_DKLIB(${LIBWEBP}/${OS}/${RELEASE_DIR}/libwebp.a)
ANDROID_DEBUG_DKLIB(${LIBWEBP}/${OS}/${DEBUG_DIR}/libwebp.a)
ANDROID_RELEASE_DKLIB(${LIBWEBP}/${OS}/${RELEASE_DIR}/libwebp.a)


#TODO
### 3RDPARTY LINK ###
#WIN_DKSET(LIBWEBP_CMAKE -DWEBP_INCLUDE_DIR=${LIBWEBP} -DWEBP_LIBRARY_DEBUG=${LIBWEBP}/${OS}/${DEBUG_DIR}/libwebpd.lib -DWEBP_LIBRARY_RELEASE=${LIBWEBP}/${OS}/${RELEASE_DIR}/libwebp.lib)
#APPLE_DKSET(LIBWEBP_CMAKE -DWEBP_INCLUDE_DIR=${LIBWEBP} -DWEBP_LIBRARY_DEBUG=${LIBWEBP}/${OS}/${DEBUG_DIR}/libwebpd.a -DWEBP_LIBRARY_RELEASE=${LIBWEBP}/${OS}/${RELEASE_DIR}/libwebp.a)
#LINUX_DKSET(LIBWEBP_CMAKE -DWEBP_INCLUDE_DIR=${LIBWEBP} -DWEBP_LIBRARY_DEBUG=${LIBWEBP}/${OS}/${DEBUG_DIR}/libwebpd.a -DWEBP_LIBRARY_RELEASE=${LIBWEBP}/${OS}/${RELEASE_DIR}/libwebp.a)
#RASPBERRY_DKSET(LIBWEBP_CMAKE -DWEBP_INCLUDE_DIR=${LIBWEBP} -DWEBP_LIBRARY_DEBUG=${LIBWEBP}/${OS}/${DEBUG_DIR}/libwebpd.a -DWEBP_LIBRARY_RELEASE=${LIBWEBP}/${OS}/${RELEASE_DIR}/libwebp.a)
#ANDROID_DKSET(LIBWEBP_CMAKE -DWEBP_INCLUDE_DIR=${LIBWEBP} -DWEBP_LIBRARY_DEBUG=${LIBWEBP}/${OS}/${DEBUG_DIR}/libwebp.a -DWEBP_LIBRARY_RELEASE=${LIBWEBP}/${OS}/${RELEASE_DIR}/libwebp.a)
	

### COMPILE ###
DKSETPATH(${LIBWEBP}/${BUILD_DIR})
DKQCOMMAND(${DKCMAKE_BUILD} ${ZLIB_CMAKE} ${LIBPNG_CMAKE} ${LIBJPEG-TURBO_CMAKE} ${TIFF_CMAKE} ${GIFLIB_CMAKE} ${SDL_CMAKE} ${LIBWEBP})


WIN_VS(${LIBWEBP_NAME} WebP.sln webp)
MAC_XCODE(${LIBWEBP_NAME} webp)
IOS_XCODE(${LIBWEBP_NAME} webp)
IOSSIM_XCODE(${LIBWEBP_NAME} webp)
LINUX_DKQCOMMAND(make webp)
RASPBERRY_DKQCOMMAND(make webp)
ANDROID_VS(${LIBWEBP_NAME} libwebp.sln webp)