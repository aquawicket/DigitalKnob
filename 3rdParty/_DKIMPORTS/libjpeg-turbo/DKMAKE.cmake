# https://github.com/libjpeg-turbo/libjpeg-turbo
# https://libjpeg-turbo.org/
# For ANDROID - https://github.com/DeviceFarmer/android-libjpeg-turbo
# https://sourceforge.net/projects/libjpeg-turbo/files/2.1.1/libjpeg-turbo-2.1.1.tar.gz/download


### IMPORT ###
#dk_import(https://sourceforge.net/projects/libjpeg-turbo/files/2.1.1/libjpeg-turbo-2.1.1.tar.gz ${3RDPARTY}/libjpeg-turbo-2.1.1)
dk_import(https://github.com/libjpeg-turbo/libjpeg-turbo.git BRANCH main)


### LINK ###
dk_include					(${LIBJPEG_TURBO})
dk_include					(${LIBJPEG_TURBO}/${OS})
DEBUG_dk_include			(${LIBJPEG_TURBO}/${OS}/${DEBUG_DIR}							LIBJPEG_TURBO_INCLUDE_DIR)
RELEASE_dk_include			(${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}							LIBJPEG_TURBO_INCLUDE_DIR)
ANDROID_dk_include			(${LIBJPEG_TURBO}/${OS}/$(BUILD_TYPE)/jni)
if(MSVC)
	ANDROID_dk_libDebug		(${LIBJPEG_TURBO}/${OS}/${DEBUG_DIR}/libturbojpeg.a				LIBJPEG_TURBO_LIBRARY_DEBUG)
	ANDROID_dk_libRelease	(${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a			LIBJPEG_TURBO_LIBRARY_RELEASE)
	WIN_dk_libDebug			(${LIBJPEG_TURBO}/${OS}/${DEBUG_DIR}/turbojpeg-static.lib		LIBJPEG_TURBO_LIBRARY_DEBUG)
	WIN_dk_libRelease		(${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/turbojpeg-static.lib		LIBJPEG_TURBO_LIBRARY_RELEASE)
elseif(APPLE)
	dk_libDebug				(${LIBJPEG_TURBO}/${OS}/${DEBUG_DIR}/libturbojpeg.a				LIBJPEG_TURBO_LIBRARY_DEBUG)
	dk_libRelease			(${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a			LIBJPEG_TURBO_LIBRARY_RELEASE)
else()
	dk_libDebug				(${LIBJPEG_TURBO}/${OS}/${DEBUG_DIR}/libturbojpeg.a				LIBJPEG_TURBO_LIBRARY_DEBUG)
	dk_libRelease			(${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a			LIBJPEG_TURBO_LIBRARY_RELEASE)
endif()

### 3RDPARTY LINK ###
if(MSVC)
	WIN_dk_set				(LIBJPEG_TURBO_CMAKE -DJPEG_INCLUDE_DIR=${LIBJPEG_TURBO_INCLUDE_DIR} "-DCMAKE_C_FLAGS=/I${LIBJPEG_TURBO}/${OS}" "-DCMAKE_CXX_FLAGS=/I${LIBJPEG_TURBO}/${OS}"  -DJPEG_LIBRARY_RELEASE=${LIBJPEG_TURBO_LIBRARY_RELEASE})
	ANDROID_dk_set			(LIBJPEG_TURBO_CMAKE -DJPEG_INCLUDE_DIR=${LIBJPEG_TURBO_INCLUDE_DIR} "-DCMAKE_C_FLAGS=-I${LIBJPEG_TURBO}/${OS}" "-DCMAKE_CXX_FLAGS=-I${LIBJPEG_TURBO}/${OS}"  -DJPEG_INCLUDE_DIR2=${LIBJPEG_TURBO}/${OS} -DJPEG_LIBRARY=${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a -DLIBJPEG_INCLUDE_DIR=${LIBJPEG_TURBO} -DLIBJPEG_LIBRARY=${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a)
elseif(APPLE)
	APPLE_dk_set			(LIBJPEG_TURBO_CMAKE -DJPEG_INCLUDE_DIR=${LIBJPEG_TURBO_INCLUDE_DIR} "-DCMAKE_C_FLAGS=-I${LIBJPEG_TURBO}/${OS}" "-DCMAKE_CXX_FLAGS=-I${LIBJPEG_TURBO}/${OS}" -DJPEG_INCLUDE_DIR2=${LIBJPEG_TURBO}/${OS} -DJPEG_LIBRARY_RELEASE=${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a -DLIBJPEG_INCLUDE_DIR=${LIBJPEG_TURBO} -DLIBJPEG_LIBRARY=${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a)
else()
	DEBUG_dk_set			(LIBJPEG_TURBO_CMAKE -DJPEG_INCLUDE_DIR=${LIBJPEG_TURBO_INCLUDE_DIR} "-DCMAKE_C_FLAGS=-I${LIBJPEG_TURBO}/${OS}/${DEBUG_DIR}" "-DCMAKE_CXX_FLAGS=-I${LIBJPEG_TURBO}/${OS}/${DEBUG_DIR}" -DJPEG_INCLUDE_DIR2=${LIBJPEG_TURBO}/${OS}/${DEBUG_DIR} -DJPEG_LIBRARY=${LIBJPEG_TURBO}/${OS}/${DEBUG_DIR}/libturbojpeg.a -DLIBJPEG_INCLUDE_DIR=${LIBJPEG_TURBO} -DLIBJPEG_LIBRARY=${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a)
	RELEASE_dk_set			(LIBJPEG_TURBO_CMAKE -DJPEG_INCLUDE_DIR=${LIBJPEG_TURBO_INCLUDE_DIR} "-DCMAKE_C_FLAGS=-I${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}" "-DCMAKE_CXX_FLAGS=-I${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}" -DJPEG_INCLUDE_DIR2=${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR} -DJPEG_LIBRARY=${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a -DLIBJPEG_INCLUDE_DIR=${LIBJPEG_TURBO} -DLIBJPEG_LIBRARY=${LIBJPEG_TURBO}/${OS}/${RELEASE_DIR}/libturbojpeg.a)
endif()


### GENERATE ##
dk_queueCommand(${DKCMAKE_BUILD} -DWITH_SIMD=OFF ${LIBJPEG_TURBO})


### COMPILE ###
dk_build(${LIBJPEG_TURBO} turbojpeg-static)
