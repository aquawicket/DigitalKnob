#!/usr/bin/cmake -P
if(NOT DKCMAKE_FUNCTIONS_DIR_)
	set(DKCMAKE_FUNCTIONS_DIR_ ${CMAKE_SOURCE_DIR}/../../../DKCMake/functions/)
endif()
include(${DKCMAKE_FUNCTIONS_DIR_}DK.cmake)


dk_load(dk_builder)
# https://github.com/mccdo/osgaudio.git


### DEPEND ###
dk_depend(freealut)
dk_depend(ogg)
dk_depend(openal)
#dk_depend(opengl)
dk_depend(openscenegraph)
dk_depend(vorbis)


### IMPORT ###
#dk_import(https://github.com/mccdo/osgaudio.git)
dk_import(https://github.com/mccdo/osgaudio/archive/refs/heads/master.zip)


### LINK ###
dk_include(${OSGAUDIO}/include)

# openalpp
ANDROID_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/obj/local/armeabi-v7a/libopenalpp.a)
ANDROID_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/obj/local/armeabi-v7a/libopenalpp.a)
APPLE_dk_libDebug(${OSGAUDIO}/${triple}/lib/${DEBUG}/libopenalppd.a)
APPLE_dk_libRelease(${OSGAUDIO}/${triple}/lib/${RELEASE}/libopenalpp.a)
EMSCRIPTEN_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/lib/libopenalppd.a)
EMSCRIPTEN_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/lib/libopenalpp.a)
LINUX_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/lib/libopenalppd.a)
LINUX_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/lib/libopenalpp.a)
RASPBERRY_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/lib/libopenalppd.a)
RASPBERRY_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/lib/libopenalpp.a)
WIN_dk_libDebug(${OSGAUDIO}/${triple}/lib/${DEBUG_DIR}/openalppd.lib)
WIN_dk_libRelease(${OSGAUDIO}/${triple}/lib/${RELEASE_DIR}/openalpp.lib)

# osgAudio
ANDROID_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/obj/local/armeabi-v7a/libosgAudio.a)
ANDROID_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/obj/local/armeabi-v7a/libosgAudio.a)
APPLE_dk_libDebug(${OSGAUDIO}/${triple}/lib/${DEBUG}/libosgAudiod.a)
APPLE_dk_libRelease(${OSGAUDIO}/${triple}/lib/${RELEASE}/libosgAudio.a)
EMSCRIPTEN_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/lib/libosgAudiod.a)
EMSCRIPTEN_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/lib/libosgAudio.a)
LINUX_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/lib/libosgAudiod.a)
LINUX_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/lib/libosgAudio.a)
RASPBERRY_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/lib/libosgAudiod.a)
RASPBERRY_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/lib/libosgAudio.a)
WIN_dk_libDebug(${OSGAUDIO}/${triple}/lib/${DEBUG_DIR}/osgAudiod.lib)
WIN_dk_libRelease(${OSGAUDIO}/${triple}/lib/${RELEASE_DIR}/osgAudio.lib)

# osgdb_osgAudio
ANDROID_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/obj/local/armeabi-v7a/libosgdb_osgAudio.a)
ANDROID_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/obj/local/armeabi-v7a/libosgdb_osgAudio.a)
APPLE_dk_libDebug(${OSGAUDIO}/${triple}/lib/${DEBUG}/libosgdb_osgAudiod.a)
APPLE_dk_libRelease(${OSGAUDIO}/${triple}/lib/${RELEASE}/libosgdb_osgAudio.a)
EMSCRIPTEN_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/lib/libosgdb_osgAudiod.a)
EMSCRIPTEN_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/lib/libosgdb_osgAudio.a)
LINUX_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/lib/libosgdb_osgAudiod.a)
LINUX_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/lib/libosgdb_osgAudio.a)
RASPBERRY_dk_libDebug(${OSGAUDIO}/${triple}/${DEBUG_DIR}/lib/libosgdb_osgAudiod.a)
RASPBERRY_dk_libRelease(${OSGAUDIO}/${triple}/${RELEASE_DIR}/lib/libosgdb_osgAudio.a)
WIN_dk_libDebug(${OSGAUDIO}/${triple}/lib/${DEBUG_DIR}/osgdb_osgAudiod.lib)
WIN_dk_libRelease(${OSGAUDIO}/${triple}/lib/${RELEASE_DIR}/osgdb_osgAudio.lib)


### GENERATE ###
string(REPLACE "-std=c++17" "" OSGAUDIO_BUILD "${DKCMAKE_BUILD}")
string(REPLACE "-std=gnu++17" "" OSGAUDIO_BUILD "${OSGAUDIO_BUILD}")
string(REPLACE "  " " " OSGAUDIO_BUILD "${OSGAUDIO_BUILD}")
ANDROID_dk_queueCommand				(${OSGAUDIO_BUILD} "-DCMAKE_CXX_FLAGS=-I${OSGAUDIO}/include" -D0_BUILD_EXAMPLES_OALPP=OFF -D0_BUILD_EXAMPLES_OSGAUDIO=OFF -D0_BUILD_EXAMPLES_OSGAUDIO_LOWLEVEL=OFF -D0_ENABLE_SUBSYSTEM_OPENAL=ON -D0_ENABLE_SUBSYSTEM_FMOD=OFF -DFMOD_INCLUDE_DIR=OFF -DFMOD_LIBRARY=OFF -DOSGAUDIO_INSTALL_DATA=OFF ${FREEALUT_CMAKE} ${OGG_CMAKE} ${OPENAL_CMAKE} ${OPENSCENEGRAPH_CMAKE} ${VORBIS_CMAKE} ${OSGAUDIO})
APPLE_dk_queueCommand				(${OSGAUDIO_BUILD} "-DCMAKE_CXX_FLAGS=-I${OSGAUDIO}/include" -D0_BUILD_EXAMPLES_OALPP=OFF -D0_BUILD_EXAMPLES_OSGAUDIO=OFF -D0_BUILD_EXAMPLES_OSGAUDIO_LOWLEVEL=OFF -D0_ENABLE_SUBSYSTEM_OPENAL=ON -D0_ENABLE_SUBSYSTEM_FMOD=OFF -DFMOD_INCLUDE_DIR=OFF -DFMOD_LIBRARY=OFF -DOSGAUDIO_INSTALL_DATA=OFF ${FREEALUT_CMAKE} ${OGG_CMAKE} ${OPENAL_CMAKE} ${OPENSCENEGRAPH_CMAKE} ${VORBIS_CMAKE} ${OSGAUDIO})
EMSCRIPTEN_DEBUG_dk_queueCommand	(${OSGAUDIO_BUILD} "-DCMAKE_CXX_FLAGS=-I${OSGAUDIO}/include" -DOSGAUDIO_USER_DEFINED_DYNAMIC_OR_STATIC=STATIC -DCMAKE_C_FLAGS=-fPIC -D0_BUILD_EXAMPLES_OALPP=OFF -D0_BUILD_EXAMPLES_OSGAUDIO=OFF -D0_BUILD_EXAMPLES_OSGAUDIO_LOWLEVEL=OFF -D0_ENABLE_SUBSYSTEM_OPENAL=ON -D0_ENABLE_SUBSYSTEM_FMOD=OFF -DFMOD_INCLUDE_DIR=OFF -DFMOD_LIBRARY=OFF -DOSGAUDIO_INSTALL_DATA=OFF ${FREEALUT_CMAKE} ${OGG_CMAKE} ${OPENAL_CMAKE} ${OPENSCENEGRAPH_CMAKE} ${VORBIS_CMAKE} ${OSGAUDIO})
EMSCRIPTEN_RELEASE_dk_queueCommand	(${OSGAUDIO_BUILD} "-DCMAKE_CXX_FLAGS=-I${OSGAUDIO}/include" -DCMAKE_C_FLAGS=-fPIC -D0_BUILD_EXAMPLES_OALPP=OFF -D0_BUILD_EXAMPLES_OSGAUDIO=OFF -D0_BUILD_EXAMPLES_OSGAUDIO_LOWLEVEL=OFF -D0_ENABLE_SUBSYSTEM_OPENAL=ON -D0_ENABLE_SUBSYSTEM_FMOD=OFF -DFMOD_INCLUDE_DIR=OFF -DFMOD_LIBRARY=OFF -DOSGAUDIO_INSTALL_DATA=OFF ${FREEALUT_CMAKE} ${OGG_CMAKE} ${OPENAL_CMAKE} ${OPENSCENEGRAPH_CMAKE} ${VORBIS_CMAKE} ${OSGAUDIO})
LINUX_DEBUG_dk_queueCommand			(${OSGAUDIO_BUILD} "-DCMAKE_CXX_FLAGS=-I${OSGAUDIO}/include" -DOSGAUDIO_USER_DEFINED_DYNAMIC_OR_STATIC=STATIC -DCMAKE_C_FLAGS=-fPIC -D0_BUILD_EXAMPLES_OALPP=OFF -D0_BUILD_EXAMPLES_OSGAUDIO=OFF -D0_BUILD_EXAMPLES_OSGAUDIO_LOWLEVEL=OFF -D0_ENABLE_SUBSYSTEM_OPENAL=ON -D0_ENABLE_SUBSYSTEM_FMOD=OFF -DFMOD_INCLUDE_DIR=OFF -DFMOD_LIBRARY=OFF -DOSGAUDIO_INSTALL_DATA=OFF ${FREEALUT_CMAKE} ${OGG_CMAKE} ${OPENAL_CMAKE} ${OPENSCENEGRAPH_CMAKE} ${VORBIS_CMAKE} ${OSGAUDIO})
LINUX_RELEASE_dk_queueCommand		(${OSGAUDIO_BUILD} "-DCMAKE_CXX_FLAGS=-I${OSGAUDIO}/include" -DCMAKE_C_FLAGS=-fPIC -D0_BUILD_EXAMPLES_OALPP=OFF -D0_BUILD_EXAMPLES_OSGAUDIO=OFF -D0_BUILD_EXAMPLES_OSGAUDIO_LOWLEVEL=OFF -D0_ENABLE_SUBSYSTEM_OPENAL=ON -D0_ENABLE_SUBSYSTEM_FMOD=OFF -DFMOD_INCLUDE_DIR=OFF -DFMOD_LIBRARY=OFF -DOSGAUDIO_INSTALL_DATA=OFF ${FREEALUT_CMAKE} ${OGG_CMAKE} ${OPENAL_CMAKE} ${OPENSCENEGRAPH_CMAKE} ${VORBIS_CMAKE} ${OSGAUDIO})
RASPBERRY_DEBUG_dk_queueCommand		(${OSGAUDIO_BUILD} "-DCMAKE_CXX_FLAGS=-I${OSGAUDIO}/include" -DCMAKE_C_FLAGS=-fPIC -D0_BUILD_EXAMPLES_OALPP=OFF -D0_BUILD_EXAMPLES_OSGAUDIO=OFF -D0_BUILD_EXAMPLES_OSGAUDIO_LOWLEVEL=OFF -D0_ENABLE_SUBSYSTEM_OPENAL=ON -D0_ENABLE_SUBSYSTEM_FMOD=OFF -DFMOD_INCLUDE_DIR=OFF -DFMOD_LIBRARY=OFF -DOSGAUDIO_INSTALL_DATA=OFF ${FREEALUT_CMAKE} ${OGG_CMAKE} ${OPENAL_CMAKE} ${OPENSCENEGRAPH_CMAKE} ${VORBIS_CMAKE} ${OSGAUDIO})
RASPBERRY_RELEASE_dk_queueCommand	(${OSGAUDIO_BUILD} "-DCMAKE_CXX_FLAGS=-I${OSGAUDIO}/include" -DCMAKE_C_FLAGS=-fPIC -D0_BUILD_EXAMPLES_OALPP=OFF -D0_BUILD_EXAMPLES_OSGAUDIO=OFF -D0_BUILD_EXAMPLES_OSGAUDIO_LOWLEVEL=OFF -D0_ENABLE_SUBSYSTEM_OPENAL=ON -D0_ENABLE_SUBSYSTEM_FMOD=OFF -DFMOD_INCLUDE_DIR=OFF -DFMOD_LIBRARY=OFF -DOSGAUDIO_INSTALL_DATA=OFF ${FREEALUT_CMAKE} ${OGG_CMAKE} ${OPENAL_CMAKE} ${OPENSCENEGRAPH_CMAKE} ${VORBIS_CMAKE} ${OSGAUDIO})
WIN_dk_queueCommand					(${OSGAUDIO_BUILD} "-DCMAKE_CXX_FLAGS=/I${OSGAUDIO}/include" -D0_BUILD_EXAMPLES_OALPP=OFF -D0_BUILD_EXAMPLES_OSGAUDIO=OFF -D0_BUILD_EXAMPLES_OSGAUDIO_LOWLEVEL=OFF -D0_ENABLE_SUBSYSTEM_OPENAL=ON -D0_ENABLE_SUBSYSTEM_FMOD=OFF -DFMOD_INCLUDE_DIR=OFF -DFMOD_LIBRARY=OFF -DOSGAUDIO_INSTALL_DATA=OFF ${FREEALUT_CMAKE} ${OGG_CMAKE} ${OPENAL_CMAKE} ${OPENSCENEGRAPH_CMAKE} ${VORBIS_CMAKE} ${OSGAUDIO})


### COMPILE ###
dk_build(${OSGAUDIO})
