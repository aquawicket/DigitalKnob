message(STATUS "##############################################################")
message(STATUS "################# emscripten_toolchain.cmake #################")
message(STATUS "##############################################################")

dk_validate(EMSDK	"dk_depend(emsdk)")
dk_validate(MAKE 	"dk_depend(make)")


if(WIN_HOST)
	dk_validate(MSYS2 "dk_depend(msys2)")
	#dk_installPackage(make)
	dk_findProgram(CMAKE_MAKE_PROGRAM make "${MSYS2_DIR}/usr/bin")
else()
	dk_findProgram(CMAKE_MAKE_PROGRAM make)
endif()
dk_set(CMAKE_GENERATOR				"Unix Makefiles")
dk_set(CMAKE_TOOLCHAIN_FILE 		"${EMSDK_TOOLCHAIN_FILE}")
dk_set(CMAKE_C_COMPILER				"${EMSDK_C_COMPILER}")
dk_set(CMAKE_CXX_COMPILER			"${EMSDK_CXX_COMPILER}")
dk_append(CMAKE_C_FLAGS				-DEMSDK -std=gnu11)
dk_append(CMAKE_CXX_FLAGS			-DEMSDK -std=gnu++17)
dk_set(CMAKE_C_COMPILER_WORKS		1)
dk_set(CMAKE_CXX_COMPILER_WORKS		1)
dk_append(DKCMAKE_FLAGS				-DEMSDK=1)
#dk_append(CMAKE_EXE_LINKER_FLAGS	-static) # -s)
