#!/usr/bin/cmake -P
include(${DKCMAKE_FUNCTIONS_DIR_}DK.cmake)
#include_guard()

###############################################################################
# dk_generateAppCmake(DK_PROJECT_DIR)
#
#
function(dk_generateAppCmake)
	dk_debugFunc()
	
	dk_load(dk_builder)
	
	set(DK_PROJECT_DIR ${ARGV0})
	dk_basename(${DK_PROJECT_DIR} APP_NAME)
	
	dk_fileWrite(${CMAKE_SOURCE_DIR}/CMakeLists.txt
"### This file is generated by DKCMake. Any Changes here, will be overwritten. ###
cmake_minimum_required(VERSION 3.10)
include(\${DKCMAKE_FUNCTIONS_DIR}/DK.cmake)
	
###### DEPENDENCIES ######
dk_depend(zlib)
dk_depend(DK)
##########################


dk_set(APP_NAME	${APP_NAME}) 
dk_compileApp(${DK_PROJECT_DIR})

\n")
endfunction()





###### DKTEST ###### DKTEST ###### DKTEST ###### DKTEST ###### DKTEST ######
function(DKTEST)
	dk_debugFunc()
	
	dk_validate(DKAPPS_DIR "dk_DKAPPS_DIR()")
	dk_generateAppCmake("${DKAPPS_DIR}/DKCore")
endfunction()